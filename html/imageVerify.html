<form>
  <div>
    <div id="img-preview"></div>
    <input type="file" accept="image/*" id="choose-file" name="choose-file" />
  </div>
</form>
<script src="bundle.js"></script>
<script>
const chooseFile = document.getElementById("choose-file");
const imgPreview = document.getElementById("img-preview");

chooseFile.addEventListener("change", function () {
  getImgData();
});

function getImgData() {
  const files = chooseFile.files[0];
  if (files) {
    const fileReader = new FileReader();
	fileReader.readAsArrayBuffer(files);
    fileReader.addEventListener("load", function () {
	  console.log(this.result);
	  var dataToParse = window.parser.create(this.result);
	  var data = dataToParse.parse();
	  console.log(data);
	  var pictureTimestamp = data.tags.CreateDate + 18000;
	  var age = ((new Date().getTime()) / 1000) - pictureTimestamp;
	  console.log("Image was taken at Unix timestamp " + pictureTimestamp + ", " + (age / 60) + " minutes ago");
	  console.log(age > 604800? "Image is older than one week" : "Image is less than a week old");
	  //lat/long 42.274404378511406, -71.80813596125853
	  console.log((Math.pow(42.274404378511406 - data.tags.GPSLatitude,2)/Math.pow(0.01449275362,2)) + (Math.pow(-71.80813596125853 - data.tags.GPSLongitude,2)/Math.pow(0.01831501831,2)) <= 1);
    });    
  }
}
</script>